<!--<!DOCTYPE html>-->
<!--<html xmlns="http://www.w3.org/1999/xhtml"-->
<!--      xmlns:th="http://www.thymeleaf.org">-->


<!--<head th:replace="~{admin-fragments::header}">-->
<!--    <meta charset="UTF-8">-->
<!--    <style>-->
<!--        ul {-->
<!--            list-style-type: none;-->
<!--            padding-left: 0;-->
<!--        }-->

<!--        body {-->
<!--            font-family: 'Roboto', sans-serif;-->
<!--        }-->

<!--        table {-->
<!--            width: 100%;-->
<!--            border-collapse: collapse;-->
<!--        }-->

<!--        table th, table td {-->
<!--            padding: 10px;-->
<!--            text-align: center;-->
<!--        }-->

<!--        table th {-->
<!--            background-color: #f8f9fa;-->
<!--            border-bottom: 2px solid #dee2e6;-->
<!--        }-->

<!--        table td {-->
<!--            border-bottom: 1px solid #dee2e6;-->
<!--        }-->

<!--        /* Tùy chỉnh cho nút submit */-->
<!--        button {-->
<!--            background-color: #1CC3B2;-->
<!--            color: white;-->
<!--            border: none;-->
<!--            padding: 10px 20px;-->
<!--            font-size: 16px;-->
<!--            border-radius: 5px;-->
<!--            cursor: pointer;-->
<!--        }-->

<!--        button:hover {-->
<!--            background-color: #17a689;-->
<!--        }-->
<!--    </style>-->
<!--    &lt;!&ndash; Liên kết tới Bootstrap CSS &ndash;&gt;-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">-->

<!--    &lt;!&ndash; Liên kết tới Google Fonts (Roboto) &ndash;&gt;-->
<!--    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">-->

<!--</head>-->
<!--<body class="sb-nav-fixed">-->

<!--<nav th:replace="~{admin-fragments::admin-nav}"></nav>-->
<!--<div id="layoutSidenav">-->
<!--    <div th:replace="~{admin-fragments::side-nav}"></div>-->
<!--    <div id="layoutSidenav_content" class="">-->

<!--        <div class="container-fluid px-4">-->
<!--            <div class="container mt-4">-->
<!--                <h1 class="text-center">Báo cáo doanh thu</h1>-->
<!--                <hr>-->

<!--                &lt;!&ndash; Form nhập ngày &ndash;&gt;-->
<!--                <form action="#" th:action="@{/admin/report/revenue}" method="post" class="mb-4">-->
<!--                    <div class="row">-->
<!--                        <div class="col-md-6">-->
<!--                            <label for="startDate" class="form-label">Ngày bắt đầu:</label>-->
<!--                            <input type="date" id="startDate" name="startDate" th:value="${startDate}" class="form-control" required/>-->
<!--                        </div>-->
<!--                        <div class="col-md-6">-->
<!--                            <label for="endDate" class="form-label">Ngày kết thúc:</label>-->
<!--                            <input type="date" id="endDate" name="endDate" th:value="${endDate}" class="form-control" required/>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class="d-flex justify-content-center">-->
<!--                        <button type="submit" class="btn w-100  btn btn-dark mt-3">Thống kê</button>-->
<!--                    </div>-->

<!--                    &lt;!&ndash;                    <button type="submit" class="btn btn-success mt-3">Thống kê</button>&ndash;&gt;-->
<!--                </form>-->

<!--                &lt;!&ndash; Hiển thị tổng doanh thu nếu có &ndash;&gt;-->
<!--                <div th:if="${totalRevenue != null}">-->
<!--                    <h2 class="text-center">Tổng doanh thu: <span th:text="${totalRevenue}"></span></h2>-->

<!--                    &lt;!&ndash; Nút Xuất báo cáo &ndash;&gt;-->
<!--                    <div class="text-center mb-4">-->
<!--                        <button onclick="printReport()" class="btn btn-primary bg-dark">Xuất báo cáo</button>-->
<!--                    </div>-->

<!--                    &lt;!&ndash; Hiển thị danh sách các booking &ndash;&gt;-->
<!--                    <table class="table table-bordered mt-4" id="reportTable">-->
<!--                        <thead>-->
<!--                        <tr>-->
<!--                            <th>Mã đặt phòng</th>-->
<!--                            <th>Ngày đặt phòng</th>-->
<!--                            <th>Người đặt phòng</th>-->
<!--                            <th>Số điện thoại</th>-->
<!--                            <th>Email</th>-->
<!--                            <th>Phòng</th>-->
<!--                            <th>Loại phòng</th>-->
<!--                            <th>Ngày nhận phòng</th>-->
<!--                            <th>Ngày trả phòng</th>-->
<!--                            <th>Tổng giá</th>-->
<!--                        </tr>-->
<!--                        </thead>-->
<!--                        <tbody>-->
<!--                        <tr th:each="booking : ${bookings}">-->
<!--                            <td th:text="${booking.bookingId}"></td>-->
<!--                            <td th:text="${#temporals.format(booking.createdAt, 'HH:mm dd/MM/yyyy')}"></td>-->
<!--                            <td th:text="${booking.user.fullName}"></td>-->
<!--                            <td th:text="${booking.user.phoneNumber}"></td>-->
<!--                            <td th:text="${booking.user.email}"></td>-->
<!--                            <td th:text="${booking.room.roomName}"></td>-->
<!--                            <td th:text="${booking.room.roomGroup.groupName}"></td>-->
<!--                            <td th:text="${booking.checkInDate}"></td>-->
<!--                            <td th:text="${booking.checkOutDate}"></td>-->
<!--                            <td th:text="${booking.totalPrice}"></td>-->
<!--                        </tr>-->
<!--                        </tbody>-->
<!--                    </table>-->



<!--&lt;!&ndash;                    &lt;!&ndash; Nút Xuất báo cáo &ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;                    <div class="text-center mt-4">&ndash;&gt;-->
<!--&lt;!&ndash;                        <button onclick="printReport()" class="btn btn-primary">Xuất báo cáo</button>&ndash;&gt;-->
<!--&lt;!&ndash;                    </div>&ndash;&gt;-->

<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->
<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"-->
<!--        crossorigin="anonymous"></script>-->
<!--<script src="js/scripts.js"></script>-->
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>-->
<!--<script src="assets/demo/chart-area-demo.js"></script>-->
<!--<script src="assets/demo/chart-bar-demo.js"></script>-->
<!--<script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest" crossorigin="anonymous"></script>-->
<!--<script src="js/datatables-simple-demo.js"></script>-->

<!--<script>-->
<!--    // Hàm in báo cáo-->
<!--    function printReport() {-->
<!--        const printContent = document.getElementById('reportTable').outerHTML; // Lấy nội dung bảng-->
<!--        const originalContent = document.body.innerHTML; // Lưu nội dung gốc-->

<!--        // Thay nội dung trang với nội dung cần in-->
<!--        document.body.innerHTML = `<html><head><title>Báo cáo doanh thu</title></head><body>${printContent}</body></html>`;-->
<!--        window.print(); // Gọi lệnh in-->

<!--        // Khôi phục nội dung ban đầu sau khi in-->
<!--        document.body.innerHTML = originalContent;-->
<!--        location.reload(); // Reload lại trang để cập nhật-->
<!--    }-->
<!--</script>-->

<!--<script>-->
<!--    // Hàm lấy ngày hôm nay và định dạng thành yyyy-MM-dd-->
<!--    function getTodayDate() {-->
<!--        const today = new Date();-->
<!--        const year = today.getFullYear();-->
<!--        const month = String(today.getMonth() + 1).padStart(2, '0'); // Tháng 0-11 nên cần +1-->
<!--        const day = String(today.getDate()).padStart(2, '0');-->
<!--        return `${year}-${month}-${day}`;-->
<!--    }-->

<!--    // Gán giá trị mặc định cho input-->
<!--    document.addEventListener("DOMContentLoaded", function () {-->
<!--        const today = getTodayDate();-->
<!--        document.getElementById("startDate").value = today;-->
<!--        document.getElementById("endDate").value = today;-->
<!--    });-->
<!--</script>-->


<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"-->
<!--        crossorigin="anonymous"></script>-->

<!--</body>-->
<!--</html>-->


<!--<!DOCTYPE html>-->
<!--<html xmlns="http://www.w3.org/1999/xhtml"-->
<!--      xmlns:th="http://www.thymeleaf.org">-->

<!--<head th:replace="~{admin-fragments::header}">-->
<!--    <meta charset="UTF-8">-->
<!--    <style>-->
<!--        ul {-->
<!--            list-style-type: none;-->
<!--            padding-left: 0;-->
<!--        }-->

<!--        body {-->
<!--            font-family: 'Roboto', sans-serif;-->
<!--        }-->

<!--        table {-->
<!--            width: 100%;-->
<!--            border-collapse: collapse;-->
<!--        }-->

<!--        table th, table td {-->
<!--            padding: 10px;-->
<!--            text-align: center;-->
<!--        }-->

<!--        table th {-->
<!--            background-color: #f8f9fa;-->
<!--            border-bottom: 2px solid #dee2e6;-->
<!--        }-->

<!--        table td {-->
<!--            border-bottom: 1px solid #dee2e6;-->
<!--        }-->

<!--        button {-->
<!--            background-color: #1CC3B2;-->
<!--            color: white;-->
<!--            border: none;-->
<!--            padding: 10px 20px;-->
<!--            font-size: 16px;-->
<!--            border-radius: 5px;-->
<!--            cursor: pointer;-->
<!--        }-->

<!--        button:hover {-->
<!--            background-color: #17a689;-->
<!--        }-->
<!--    </style>-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">-->
<!--    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">-->
<!--</head>-->

<!--<body class="sb-nav-fixed">-->
<!--<nav th:replace="~{admin-fragments::admin-nav}"></nav>-->
<!--<div id="layoutSidenav">-->
<!--    <div th:replace="~{admin-fragments::side-nav}"></div>-->
<!--    <div id="layoutSidenav_content" class="">-->

<!--        <div class="container-fluid px-4">-->
<!--            <div class="container mt-4">-->
<!--                <h1 class="text-center">Báo cáo doanh thu</h1>-->
<!--                <hr>-->

<!--                <form action="#" th:action="@{/admin/report/revenue}" method="post" class="mb-4">-->
<!--                    <div class="row">-->
<!--                        <div class="col-md-6">-->
<!--                            <label for="startDate" class="form-label">Ngày bắt đầu:</label>-->
<!--                            <input type="date" id="startDate" name="startDate" th:value="${startDate}" class="form-control" required/>-->
<!--                        </div>-->
<!--                        <div class="col-md-6">-->
<!--                            <label for="endDate" class="form-label">Ngày kết thúc:</label>-->
<!--                            <input type="date" id="endDate" name="endDate" th:value="${endDate}" class="form-control" required/>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class="d-flex justify-content-center">-->
<!--                        <button type="submit" class="btn w-100 btn-dark mt-3">Thống kê</button>-->
<!--                    </div>-->
<!--                </form>-->

<!--                <div th:if="${totalRevenue != null}">-->
<!--                    <h2 class="text-center">Tổng doanh thu: <span th:text="${totalRevenue}"></span></h2>-->

<!--                    &lt;!&ndash; Nút Xuất báo cáo &ndash;&gt;-->
<!--                    <div class="text-center mb-4">-->
<!--                        <button onclick="printReport()" class="btn btn-dark">Xuất báo cáo</button>-->
<!--                    </div>-->

<!--                    &lt;!&ndash; Hiển thị danh sách các booking &ndash;&gt;-->
<!--                    <table class="table table-bordered mt-4" id="reportTable">-->
<!--                        <thead>-->
<!--                        <tr>-->
<!--                            <th>Mã đặt phòng</th>-->
<!--                            <th>Ngày đặt phòng</th>-->
<!--                            <th>Người đặt phòng</th>-->
<!--                            <th>Số điện thoại</th>-->
<!--                            <th>Email</th>-->
<!--                            <th>Phòng</th>-->
<!--                            <th>Loại phòng</th>-->
<!--                            <th>Ngày nhận phòng</th>-->
<!--                            <th>Ngày trả phòng</th>-->
<!--                            <th>Tổng giá</th>-->
<!--                        </tr>-->
<!--                        </thead>-->
<!--                        <tbody>-->
<!--                        <tr th:each="booking : ${bookings}">-->
<!--                            <td th:text="${booking.bookingId}"></td>-->
<!--                            <td th:text="${#temporals.format(booking.createdAt, 'HH:mm dd/MM/yyyy')}"></td>-->
<!--                            <td th:text="${booking.user.fullName}"></td>-->
<!--                            <td th:text="${booking.user.phoneNumber}"></td>-->
<!--                            <td th:text="${booking.user.email}"></td>-->
<!--                            <td th:text="${booking.room.roomName}"></td>-->
<!--                            <td th:text="${booking.room.roomGroup.groupName}"></td>-->
<!--                            <td th:text="${booking.checkInDate}"></td>-->
<!--                            <td th:text="${booking.checkOutDate}"></td>-->
<!--                            <td th:text="${booking.totalPrice}"></td>-->
<!--                        </tr>-->
<!--                        </tbody>-->
<!--                    </table>-->
<!--                </div>-->

<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--<script>-->
<!--    function printReport() {-->
<!--        const startDate = document.getElementById("startDate").value;-->
<!--        const endDate = document.getElementById("endDate").value;-->

<!--        const now = new Date();-->
<!--        const timestamp = now.toLocaleString("vi-VN", {-->
<!--            day: "2-digit",-->
<!--            month: "2-digit",-->
<!--            year: "numeric",-->
<!--            hour: "2-digit",-->
<!--            minute: "2-digit",-->
<!--            second: "2-digit",-->
<!--        });-->

<!--        document.getElementById("fromDate").innerText = startDate;-->
<!--        document.getElementById("toDate").innerText = endDate;-->
<!--        document.getElementById("reportTimestamp").innerText = timestamp;-->

<!--        const reportHeader = document.getElementById("reportHeader").outerHTML;-->
<!--        const reportTable = document.getElementById("reportTable").outerHTML;-->
<!--        console.log(reportHeader)-->
<!--        console.log(reportTable)-->
<!--        const printContent = `<div>${reportHeader}${reportTable}</div>`;-->

<!--        const originalContent = document.body.innerHTML;-->

<!--        document.body.innerHTML = `<html><head><title>Báo cáo doanh thu</title></head><body>${printContent}</body></html>`;-->
<!--        window.print();-->
<!--        document.body.innerHTML = originalContent;-->
<!--        location.reload();-->
<!--    }-->

<!--    function getTodayDate() {-->
<!--        const today = new Date();-->
<!--        const year = today.getFullYear();-->
<!--        const month = String(today.getMonth() + 1).padStart(2, '0');-->
<!--        const day = String(today.getDate()).padStart(2, '0');-->
<!--        return `${year}-${month}-${day}`;-->
<!--    }-->

<!--    document.addEventListener("DOMContentLoaded", function () {-->
<!--        const today = getTodayDate();-->
<!--        document.getElementById("startDate").value = today;-->
<!--        document.getElementById("endDate").value = today;-->
<!--    });-->
<!--</script>-->

<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{admin-fragments::header}">
    <meta charset="UTF-8">
    <style>
        ul {
            list-style-type: none;
            padding-left: 0;
        }

        body {
            font-family: 'Roboto', sans-serif;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        table th, table td {
            padding: 10px;
            text-align: center;
        }

        table th {
            background-color: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
        }

        table td {
            border-bottom: 1px solid #dee2e6;
        }

        button {
            background-color: #1CC3B2;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background-color: #17a689;
        }
    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>

<body class="sb-nav-fixed">
<nav th:replace="~{admin-fragments::admin-nav}"></nav>
<div id="layoutSidenav">
    <div th:replace="~{admin-fragments::side-nav}"></div>
    <div id="layoutSidenav_content" class="">

        <div class="container-fluid px-4">
            <div class="container mt-4">
                <h1 class="text-center">Báo cáo doanh thu</h1>
                <hr>

                <form action="#" th:action="@{/admin/report/revenue}" method="post" class="mb-4">
                    <div class="row">
                        <div class="col-md-6">
                            <label for="startDate" class="form-label">Ngày bắt đầu:</label>
                            <input type="date" id="startDate" name="startDate" th:value="${startDate}" class="form-control" required/>
                        </div>
                        <div class="col-md-6">
                            <label for="endDate" class="form-label">Ngày kết thúc:</label>
                            <input type="date" id="endDate" name="endDate" th:value="${endDate}" class="form-control" required/>
                        </div>
                    </div>

                    <div class="d-flex justify-content-center">
                        <button type="submit" class="btn w-100 btn-dark mt-3">Thống kê</button>
                    </div>
                </form>

                <div th:if="${totalRevenue != null}">
                    <h2 class="text-center">Tổng doanh thu: <span id="totalRevenue" th:text="${totalRevenue}"></span></h2>
                    <p class="text-center" style="display: none">Ngày xuất báo cáo: <span id="reportGeneratedDate"></span></p>

                    <!-- Nút Xuất báo cáo -->
                    <div class="text-center mb-4">
                        <button onclick="printReport()" class="btn btn-dark">Xuất báo cáo</button>
                    </div>

                    <!-- Hiển thị danh sách các booking -->
                    <table class="table table-bordered mt-4" id="reportTable">
                        <thead>
                        <tr>
                            <th>Mã đặt phòng</th>
                            <th>Ngày đặt phòng</th>
                            <th>Người đặt phòng</th>
                            <th>Số điện thoại</th>
                            <th>Email</th>
                            <th>Phòng</th>
                            <th>Loại phòng</th>
                            <th>Ngày nhận phòng</th>
                            <th>Ngày trả phòng</th>
                            <th>Tổng giá</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="booking : ${bookings}">
                            <td th:text="${booking.bookingId}"></td>
                            <td th:text="${#temporals.format(booking.createdAt, 'HH:mm dd/MM/yyyy')}"></td>
                            <td th:text="${booking.user.fullName}"></td>
                            <td th:text="${booking.user.phoneNumber}"></td>
                            <td th:text="${booking.user.email}"></td>
                            <td th:text="${booking.room.roomName}"></td>
                            <td th:text="${booking.room.roomGroup.groupName}"></td>
                            <td th:text="${booking.checkInDate}"></td>
                            <td th:text="${booking.checkOutDate}"></td>
                            <td th:text="${booking.totalPrice}"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </div>
</div>

<script>
    function printReport() {
        const now = new Date();
        const timestamp = now.toLocaleDateString("vi-VN") + " " + now.toLocaleTimeString("vi-VN");

        const startDate = document.getElementById("startDate").value;
        const endDate = document.getElementById("endDate").value;
        const totalRevenue = document.getElementById("totalRevenue").value;

        const printContent = `
            <h1 class="text-center">Báo cáo doanh thu</h1>
<!--            <h2 class="text-center">Tổng doanh thu: ${totalRevenue}</h2>-->
            <p class="text-center">Ngày bắt đầu: ${startDate}</p>
            <p class="text-center">Ngày kết thúc: ${endDate}</p>
            <p class="text-center">Ngày xuất báo cáo: ${timestamp}</p>
            ${document.getElementById("reportTable").outerHTML}
        `;

        const originalContent = document.body.innerHTML;
        document.body.innerHTML = printContent;
        window.print();
        document.body.innerHTML = originalContent;
    }

    document.addEventListener("DOMContentLoaded", function () {
        const today = new Date().toISOString().split("T")[0];
        document.getElementById("reportGeneratedDate").innerText = today;
    });
</script>

<script>
    // Hàm lấy ngày hôm nay ở định dạng 'yyyy-MM-dd'
    function getTodayDate() {
        const today = new Date();
        const year = today.getFullYear();
        const month = String(today.getMonth() + 1).padStart(2, '0');
        const day = String(today.getDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
    }

    // Cập nhật giá trị mặc định khi tải trang
    document.addEventListener("DOMContentLoaded", function () {
        const today = getTodayDate();
        const startDateInput = document.getElementById("startDate");
        const endDateInput = document.getElementById("endDate");

        // Nếu người dùng chưa chọn ngày, tự động gán giá trị hôm nay
        if (!startDateInput.value) {
            startDateInput.value = today;
        }
        if (!endDateInput.value) {
            endDateInput.value = today;
        }
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
